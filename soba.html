<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=0.6">
<title>Simulasi Ujian</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: rgba(59, 130, 246, 0.30);
  font-size: 10px;
  font-weight: 500;

  color: #000; /* ğŸ”¥ TEKS PUTIH */

  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}
#questionImage {
  display: block;
  margin: 20px auto;   /* tetap tengah */
  max-width: 100%;
}
.talker {
  width: 50px;          /* ğŸ”¥ ukuran emoji */
  height: 50px;
  vertical-align: middle;
  margin-right: 6px;
}
.answers label.correct {
  background: #c8e6c9;
  border-color: #2e7d32;
}

.answers label.wrong {
  background: #ffcdd2;
  border-color: #c62828;
}

.sidebar button.wrong {
  background: #f44336;
  color: #fff;
}
.container {
  display: flex;
  width: 900px;
  margin: 110px auto 20px auto; /* ğŸ”¥ TURUNKAN CONTAINER */

  background: #ffffff;
  border: 2px solid #e5e7eb;
  border-radius: 18px;
  padding: 20px;
}
.session-bar {
  position: absolute;
  top: 80px;
  width: 100%;
  text-align: center;
  z-index: 10;
  
}

.session-bar button {
  padding: 10px 20px;
  font-size: 16px;
  font-weight: bold;
  border: 3px solid #000;
  cursor: pointer;
  background: #ff9800;
  margin-bottom: 8px;
}

.session-menu {
  margin-top: 10px;
  display: none;
}

.session-menu button {
  margin: 5px;
  padding: 10px 18px;
  font-size: 16px;
  border: 3px solid #000;
  cursor: pointer;
  background: #2196f3;
  color: #fff;
  
}
.answers input[type="radio"] {
  transform: scale(1.3);   /* gedein bulatan */
  margin-right: 12px;
}
.question-hint {
  font-size: 18px;
  font-weight: 600;
  text-align: center;
  margin-bottom: 12px;

  background: #e5e7eb;          /* abu-abu gelap */
  border-left: 6px solid #6b7280; /* aksen abu tua */
  padding: 10px 16px;
  border-radius: 6px;

  color: #111827;               /* teks hampir hitam */
}
/* SIDEBAR */
.sidebar {
  width: 80px;
  border-right: 2px solid #000;
  padding: 10px;
}
.kanji {
  color: red;
  font-weight: 700;
text-decoration: underline; 
}
.sidebar button {
  width: 100%;
  margin-bottom: 8px;
  padding: 10px;
  border: 3px solid #000;
  background: #fff;
  font-weight: bold;
  cursor: pointer;
  font-size: 16px;
}

.sidebar button.active {
  background: #4caf50;
  color: #fff;
}

.sidebar button.answered {
  background: #2196f3;
  color: #fff;
}
.double-label {
  font-size: 22px;
  font-weight: 600;
  text-align: center;
  margin-bottom: 8px;
  color: #f00;
}

.double-question-text {
  font-size: 25px;
  font-weight: 550;
  text-align: center;

  
  margin-bottom: 20px;
}
/* CONTENT */
.content {
  flex: 1;
  padding: 20px;
}
.title {
  position: absolute;
  top: 10px;

  width: 100%;
  text-align: center;

  font-size: 36px;
  font-weight: 800;
  color: #fff;

  text-shadow: 0 0 15px rgba(168, 85, 247, 0.8);
  letter-spacing: 2px;
}
.answers button {
  margin-bottom: 10px;
  padding: 10px 15px;
  font-size: 18px;
  cursor: pointer;
}
.answers label {
  display: block;
  border: 2px solid rgba(33, 150, 243, 0.5); /* ğŸ”µ biru transparan */
  padding: 15px;
  margin-bottom: 10px;
  cursor: pointer;
  font-size: 25px;
  font-weight: 600;
}
.question-text {
  font-size: 25px;
  font-weight: 550;
  text-align: center;

  background: rgba(255, 165, 0, 0.2);
  border: 2px solid #ff9800;
  padding: 14px 23px;
  margin-bottom: 30px;
}
/* FOOTER */
.footer {
  margin-top: 20px;
  text-align: right;
}

.footer button {
  padding: 15px 30px;
  border: 4px solid #000;
  font-weight: bold;
  font-size: 20px;
  cursor: pointer;
  background: #ff9800;
  color: #000;
}
.dialog {
  display: flex;
  align-items: center;
  gap: 10px;

  padding: 12px 16px;
  margin-bottom: 10px;
  border-radius: 10px;

  font-size: 26px;
  font-weight: 500;
}

/* ğŸ‘© CEWEK â†’ putih + border hitam */
.dialog.female {
  background: #ffffff;
  border: 3px solid #ff9800;
  color: #000;
}

/* ğŸ‘¨ COWOK â†’ TETAP ORANGE (JANGAN DIUBAH) */
.dialog.male {
  background: #ffffff;
  border: 3px solid #3b82f6;
  color: #000;
}
/* ===== FAKE AUDIO BUTTON ===== */
.fake-audio {
  width: 80%;
  max-width: 420px;
  margin: 15px auto;
  padding: 12px;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
  background: #e5e7eb;
  border: 3px solid #000;
  border-radius: 10px;
  cursor: pointer;
}

.fake-audio.playing {
  background: #4caf50;
  color: #fff;
}
</style>
</head>

<body>
<h1 class="title" id="title">SOBA SESI 1</h1>
<div class="session-bar" id="sessionBar">
  <button onclick="toggleSessionMenu()">ğŸ“‚ PILIH SESI</button>

  <div class="session-menu" id="sessionMenu">
    <button onclick="goSession(0)">SESI 1</button>
    <button onclick="goSession(1)">SESI 2</button>
    <button onclick="goSession(2)">SESI 3</button>
    <button onclick="goSession(3)">SESI 4</button>
  </div>
</div>

</div>
<div class="container">
  <div class="sidebar" id="sidebar"></div>

  <div class="content">
<div class="question-hint" id="questionHint" style="display:none;"></div>
    <div class="question-text" id="questionText">
      Lihatlah ilustrasi, kemudian pilihlah kata yang benar
    </div>

    <img id="questionImage" width="500" style="display:none;">

    <div class="answers" id="answers"></div>
<div class="footer">
      <button id="prevBtn" style="display:none;">â¬… KEMBALI</button>
      <button id="finishBtn" style="display:none;">SELESAI</button>
      <button id="nextBtn" style="display:none;">LANJUT â¡</button>
    </div>
    
<div id="result" style="
      display:none;
      margin-top:30px;
      padding:20px;
      border:3px solid #000;
      background:#e8f5e9;
      font-size:24px;
      font-weight:bold;
      text-align:center;
    ">
    </div>
  </div>
</div>

<script>
let questions = [
  {
    image: "https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9836.png",
    imageWidth: 350,
    hint : "lihatlah ilustrasi, kemudian pililah kata yang benar.",
    choices: ["1. ãƒ©ãƒ¼ãƒ¡ãƒ³", "2. ãã°", "3. ãƒ‘ã‚¹ã‚¿"],
    correct: 1
  },
  {
    image: "https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9838.png",
    imageWidth: 400,
    hint : "lihatlah ilustrasi, kemudian pililah kata yang benar.",
    choices: ["1. ã¯ã—ã‚‹", "2. ã‚ã‚‹ã", "3. ãŠã©ã‚‹"],
    correct: 2
  },
  {
    image: "https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9839.png",
    imageWidth: 400,
    hint : "lihatlah ilustrasi, kemudian pililah kata yang benar.",
    choices: ["1. ãªã‚‰ã³ã¾ã™", "2. ãŸã¡ã¾ã™", "3. ã‚ã‚‹ãã¾ã™"],
    correct: 0
  },
  {
    image: "",
    hint : "Bacarlah percakapan berikut, kemudian Pililah jawaban yang paling sesuai dengan bagian (____)",
    text: "ç´™ã«__________ã§åå‰ã‚’æ›¸ã„ã¦ãã ã•ã„",
    choices: ["A. ã¯ã—", "B. ãƒœãƒ¼ãƒ«ãƒšãƒ³", "C. ãƒŠã‚¤ãƒ•"],
    correct: 1
  },
  {
      image: "",
      hint : "Bacarlah percakapan berikut, kemudian Pililah jawaban yang paling sesuai dengan bagian (____)",
      text: "ã•ã¨ã†ã‚’å…¥ã‚Œã™ãã¦ã€_________ãªã‚Šã¾ã—ãŸ",
      choices: ["A. ã—ãŠã‹ã‚‰ã", "B. ã‹ã‚‰ã", "C. ã‚ã¾ã"],
      correct: 2
    },
  {
        image: "",
        hint : "Bacarlah percakapan berikut, kemudian Pililah jawaban yang paling sesuai dengan bagian (____)",
        text: "ã‚«ãƒ©ã‚ªã‚±å¤§ä¼šã‚’å‚åŠ ã—ãŸã„äººã¯ã€________ãŠé‡‘ã‚’ãã ã•ã„",
        choices: ["A. ã‹ã„ã¦ ", "B. ã¯ã‚‰ã£ã¦", "C. ãŸã¹ã¦"],
        correct: 1
      },
  {
          image: "",
          hint : "Pililah cara baca yang tepat dari Kanji yang digarisbawahi",
          text: "2ã‹ã„ã®<span class='kanji'>åºƒã„</span>ã‹ã„ãã—ã¤ã«æ¥ã¦ãã ã•ã„",
          choices: ["A. ã²ã‚ã„", "B. ã›ã¾ã", "C. ãµã‹ã"],
          correct: 0
        },

       {
          image: "",
          hint : "Pililah cara baca yang tepat dari Kanji yang digarisbawahi",
          text: "çˆ¶ã¯<span class='kanji'>å¦¹</span>ã«æ—¥æœ¬èªã‚’å‹‰å¼·ã—ã¾ã™",
          choices: ["A. ã„ã‚‚ã†ã¨", "B. ãŠã¨ã†ã¨", "C. ã¯ã¯"],
          correct: 0
        },

{
          image: "",
          hint : "Pililah cara baca yang tepat dari Kanji yang digarisbawahi",
          text: "ã¾ã„ã«ã¡å¿™ã—ãã¦ã‚‚ã€æ—¥æœ¬èªã®ã¹ã‚“ãã‚‡ã†ã‚’<span class='kanji'>ç¶šã‘ã¦</span>ãã ã•ã„",
          choices: ["A. ã¨ã‚ã¦", "B. ã¤ã¥ã‘ã¦", "C. ãŠã‚ã£ã¦"],
          correct: 1
        },
  {
    image: "",
    hint : "Bacarlah percakapan berikut, kemudian Pililah jawaban yang paling sesuai dengan bagian (____)",
    text: "ãã®ã†ã®å¤œï¼ˆ____ï¼‰ã«ã¤ãã¾ã—ãŸ",
    choices: ["A. æ™‚é–“ï¼ˆã˜ã‹ã‚“ï¼‰", "B. ç´™ï¼ˆã‹ã¿ï¼‰", "C. å®¶ï¼ˆã„ãˆ / ã†ã¡ï¼‰"],
    correct: 2
  },
  {
    image: "",
    hint : "Bacalah percakapan berikut, kemudian Pililah jawaban yang paling sesuai dengan bagian (____)",
    text: "æ˜¨æ—¥ã¯ï¼ˆ____ï¼‰ã˜ã‹ã‚“ã‚’ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ",
    choices: ["A. æ¥½ã—ã„", "B. é‡ã„", "C. å¤§ãã„"],
    correct: 0
  },
  {
      image: "",
      hint : "Bacalah percakapan berikut, kemudian Pililah jawaban yang paling sesuai dengan bagian (____)",
      text: "æœã‹ã‚‰ã¤ã‚ãŸã„ï¼ˆ____ï¼‰ãŒãµã„ã¦ã„ã¾ã™",
      choices: ["A. èŠ±", "B. é¢¨", "C. æ¤…å­"],
      correct: 1
    },
    {
      image: "",
      hint : "Bacalah percakapan berikut, kemudian Pililah jawaban yang paling sesuai dengan bagian (____)",
      text: "ãªãŒã„ã˜ã‹ã‚“ã§ï¼ˆ____ï¼‰ã—ãŸã‹ã‚‰ã€ã¤ã‹ã‚Œã¾ã—ãŸ",
      choices: ["A. é‹è»¢", "B. èª•ç”Ÿ", "C. å¯ã‚‹"],
      correct: 0
    },
    {
      image: "",
      hint : "Bacalah percakapan berikut, kemudian Pililah jawaban yang paling sesuai dengan bagian (____)",
      text: "ãŒã£ã“ã†ã®ï¼ˆ____ï¼‰ã—ãã¯æ˜æ—¥ã§ã™",
      choices: ["A. é›¨", "B. å’æ¥­", "C. æ–™ç†"],
      correct: 1
    }
    
];
const questionsSession2 = [
  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, baca dialog dan pilih ungkapan yang paling benar",
    text: `
      <div class="dialog male">
        A : æ—¥æ›œæ—¥ã«ã•ãã‚‰å…¬åœ’ã«ãŠç¥­ã‚ŠãŒï¼¿ï¼¿ï¼¿ï¼¿ã€‚ä¸€ç·’ã«è¡Œãã¾ã›ã‚“ã‹ï¼Ÿ
      </div>
      <div class="dialog female">
        B : ãã‚Œã¯ã„ã„ã§ã™ã­ã€‚è¡Œãã¾ã—ã‚‡ã†
      </div>
    `,
    choices: [
      "A. ã‚ã‚Šã¾ã™",
      "B. ã„ã¾ã™",
      "C. è¡Œãã¾ã™"
    ],
    correct: 0
  },
  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, baca dialog dan pilih ungkapan yang paling benar",
    text: `
      <div class="dialog male">
        A : ç”°ä¸­ã•ã‚“ã®å®¶ã¯ã©ã“ã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ
      </div>
      <div class="dialog female">
        B : é§…ã®è¿‘ãã«ã‚ã‚Šã¾ã™
      </div>
      <div class="dialog male">
        A : ãã‚Œã¯ä¾¿åˆ©ã§ã™ã­
      </div>
      <div class="dialog female">
        B : ãã†ã§ã™ã€‚ã§ã‚‚ï¼¿ï¼¿ï¼¿ï¼¿
      </div>
    `,
    choices: [
      "A. ã²ã‚ã„",
      "B. ã›ã¾ã„",
      "C. é«˜ã„"
    ],
    correct: 1
  },
  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, baca dialog dan pilih ungkapan yang paling benar",
    text: `
      <div class="dialog male">
        A : éƒ¨é•·ã€ã¡ã‚‡ã£ã¨ã‚ˆã‚ã—ã„ã§ã™ã‹
      </div>
      <div class="dialog female">
        B : ã¯ã„ã€ä½•ã§ã™ã‹ï¼Ÿ
      </div>
      <div class="dialog male">
        A : æ˜æ—¥ã®åˆå¾Œã€ä¼‘ã¿ã‚’å–ã£ã¦ã‚‚ã„ã„ã§ã™ã‹ï¼Ÿ ã¡ã‚‡ã£ã¨éŠ€è¡Œã«ï¼¿ï¼¿ï¼¿ï¼¿
      </div>
      <div class="dialog female">
        B : ãã†ãªã‚“ã§ã™ã‹ã€‚ã„ã„ã§ã™ã‚ˆ
      </div>
    `,
    choices: [
      "A. è¡ŒããŸã„ã‚“ã§ã™",
      "B. è¡Œãã¾ã™",
      "C. è¡Œãã¾ã›ã‚“"
    ],
    correct: 0
  },
  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, baca dialog dan pilih ungkapan yang paling benar",
    text: `
      <div class="dialog male">
        A : ã‚‚ã—ã‚‚ã—ã€ç”°ä¸­ã•ã‚“ã§ã™ã‹
      </div>
      <div class="dialog female">
        B : ã‚ï¼å±±ç”°ã•ã‚“ã€ä»Šã©ã“ã«ã„ã¾ã™ã‹ï¼Ÿ
      </div>
      <div class="dialog male">
        A : é§…ã§ã™ã€‚ã™ã¿ã¾ã›ã‚“ã€æ™‚é–“ã‚’ï¼¿ï¼¿ï¼¿ï¼¿15åˆ†ãã‚‰ã„ãŠãã‚Œã¾ã™
      </div>
      <div class="dialog female">
        B : ã‚ã‚ã€ãã†ãªã‚“ã§ã™ã‹ã€‚ã¯ã„ã€å¾…ã¡ã¾ã™ã‚ˆ
      </div>
    `,
    choices: [
      "A. ã„ãã„ã§",
      "B. ã¾ã£ã¦ã„ã¾ã™",
      "C. ã¾ã¡ãŒãˆã¦"
    ],
    correct: 2
  },
  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, baca dialog dan pilih ungkapan yang paling benar",
    text: `
      <div class="dialog male">
        A : ãã®äººã™ã¦ãã§ã™ã­ï¼
      </div>
      <div class="dialog female">
        B : ã‚ã‚ã€ã•ã„ãã‚“ãƒ‰ãƒ©ãƒã§ã‚ˆãè¦‹ã¾ã™ã­ï¼
      </div>
      <div class="dialog male">
        A : æ­Œã‚‚ï¼¿ï¼¿ï¼¿ï¼¿ã€ãƒ€ãƒ³ã‚¹ã‚‚ï¼¿ï¼¿ï¼¿ï¼¿ã§ãã‚‹ã‚“ã§ã™ã‚ˆ
      </div>
      <div class="dialog female">
        B : ãã†ãªã‚“ã§ã™ã‹
      </div>
    `,
    choices: [
      "A. å¿™ã—ã„ã—",
      "B. ä¸‹æ‰‹ã ã—",
      "C. ã˜ã‚‡ã†ãšã ã—"
    ],
    correct: 2
  },
  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, baca dialog dan pilih ungkapan yang paling benar",
    text: `
      <div class="dialog male">
        A : å±±ç”°ã•ã‚“ã€ãƒ‹ã‚³ãƒ‹ã‚³ãƒ©ãƒ³ãƒ‰ã¸è¡Œã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ
      </div>
      <div class="dialog female">
        B : ãˆãˆã€å…ˆæœˆè¡Œãã¾ã—ãŸã‚ˆ
      </div>
      <div class="dialog male">
        A : ãã®ä¸­ã«é£Ÿã¹ã‚‹ã¨ã“ã‚ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ
      </div>
      <div class="dialog female">
        B : ã„ã‚ã„ã‚ã‚ã‚Šã¾ã™ã‚ˆã€‚ã§ã‚‚ã€åºƒå ´ã®ã¨ãªã‚Šã®ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã§ï¼¿ï¼¿ï¼¿ï¼¿é«˜ã„ã§ã™ã‹ã‚‰
      </div>
    `,
    choices: [
      "A. é£Ÿã¹ã¾ã™",
      "B. é£Ÿã¹ãªã„ã»ã†ãŒã„ã„ã§ã™",
      "C. é£Ÿã¹ã¾ã—ãŸ"
    ],
    correct: 1
  },

  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, pilih ungkapan yang paling tepat",
    text: `
      <div class="dialog male">
        A : ãŠå…ˆã«å¤±ç¤¼ã—ã¾ã™
      </div>
      <div class="dialog female">
        B : ________
      </div>
    `,
    choices: [
      "A. ã•ã‚ˆã†ãªã‚‰",
      "B. ã“ã‚“ã«ã¡ã¯",
      "C. ãŠç–²ã‚Œã•ã¾ã§ã—ãŸ"
    ],
    correct: 2
  },
  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, pilih ungkapan yang paling tepat",
    text: `
      <div class="dialog male">
        A : ãƒãƒªã•ã‚“ã€ã“ã®å†™çœŸã¯__________
      </div>
      <div class="dialog female">
        B : ã¯ã¯ã§ã™
      </div>
    `,
    choices: [
      "A. ã©ã“",
      "B. ã ã‚Œ",
      "C. ã„ã¤"
    ],
    correct: 1
  },
  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, pilih ungkapan yang paling tepat",
    text: `
      <div class="dialog male">
        A : ç”°ä¸­ã•ã‚“ã€ã²ã•ã—ã¶ã‚Šã§ã™ã­
      </div>
      <div class="dialog female">
        B : ã²ã•ã—ã¶ã‚Šã§ã™ã€‚ãŠå…ƒæ°—ã§ã™ã‹ï¼Ÿ
      </div>
      <div class="dialog male">
        A : ________
      </div>
    `,
    choices: [
      "A. ãŠã‹ã’ã•ã¾ã§",
      "B. ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™",
      "C. ã™ã¿ã¾ã›ã‚“"
    ],
    correct: 0
  },
  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, pilih ungkapan yang paling tepat",
    text: `
      <div class="dialog male">
        A : ã‚±ãƒ³ã•ã‚“ã€æ—¥æœ¬èªã¯ã‚‚ã†æ…£ã‚Œã¾ã—ãŸã‹ï¼Ÿ
      </div>
      <div class="dialog female">
        B : ã¾ã ã§ã™ã€‚ã¡ã‚‡ã£ã¨ã€‚ã€‚
      </div>
      <div class="dialog male">
        A : ãã†ãªã‚“ã§ã™ã‹ã€‚__________
      </div>
    `,
    choices: [
      "A. è¡Œã£ã¦ãã ã•ã„",
      "B. ãŠç–²ã‚Œã•ã¾ã§ã—ãŸ",
      "C. é ‘å¼µã£ã¦ãã ã•ã„"
    ],
    correct: 2
  },
  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, pilih ungkapan yang paling tepat",
    text: `
      <div class="dialog male">
        A : ã¯ã„ã€ã“ã‚Œã¯ç§ã®å›½ã®é£Ÿã¹ç‰©ã§ã™ã€‚
      </div>
      <div class="dialog female">
        B : ãˆãˆã€ã¯ã˜ã‚ã¦é£Ÿã¹ã¾ã™ã€‚
      </div>
      <div class="dialog male">
        A : é£Ÿã¹ã‚‹æ™‚ã€ã“ã®è‚‰ã¨é‡èœã‚’__________ã¾ã„ã¦é£Ÿã¹ã¾ã™ã€‚
      </div>
      <div class="dialog female">
        B : ãˆãˆã€ãŠã„ã—ãã†ã§ã™ã­
      </div>
    `,
    choices: [
      "A. ã“ã†ã‚„ã£ã¦",
      "B. ã™ãã«",
      "C. ãŸãã•ã‚“"
    ],
    correct: 0
  },
  {
    image: "",
    imageWidth: 300,
    hint: "dua orang sedang berbicara, pilih ungkapan yang paling tepat",
    text: `
      <div class="dialog male">
        A : ã™ã¿ã¾ã›ã‚“å…ˆç”Ÿã€ã¡ã‚‡ã£ã¨æ™‚é–“ã„ã„ã§ã™ã‹ï¼Ÿ
      </div>
      <div class="dialog female">
        B : ã¯ã„ã€ä½•ã§ã™ã‹ï¼Ÿ
      </div>
      <div class="dialog male">
        A : ã“ã‚Œã¯ç§ãŒæ›¸ã„ãŸã•ãã¶ã‚“ã§ã™ãŒã€æ—¥æœ¬èªã¯ãƒã‚§ãƒƒã‚¯__________
      </div>
      <div class="dialog female">
        B : ã¯ã„ã€ã„ã„ã§ã™ã‚ˆã€‚ã“ã‚Œã‹ã‚‰èª­ã‚“ã§ã¿ã¾ã™ã­
      </div>
    `,
    choices: [
      "A. ã—ã¾ã™",
      "B. ãŠé¡˜ã„ã§ãã¾ã›ã‚“ã‹",
      "C. èª­ã¿ã¾ã™"
    ],
    correct: 1
  }

];

const questionsSession3 = [
    {
      hint: "Dengarkan percakapan, lalu pilih jawaban yang benar",
audio: "https://raw.githubusercontent.com/ivank1999/Ivank/main/Percakapan1.mp3",
     text: `
        <div style="text-align:center; font-size:25px; opacity:0.7; margin-bottom:10px;">
          Ada wanita yang bertamu ke tempat pria, orang yang ditawarkan minuman?
          ditawarkan minum kopi, tetapi wanita tersebut bertanya, apakah ada air putih?
          kemudian pria tersebut menawarkan lagi, bagaimana kalau jus?
          akhirnya wanita tersebut memilih jus
        </div>
    
         <div style="text-align:center; font-size:20px; color:red; opacity:0.7; margin-bottom:8px;">
          Pertanyaan:
        </div>
        <div style="text-align:center; font-size:25px; font-weight:600;">
          MINUMAN APA YANG DIMINUM?
        </div>
      `,
      choices: [
        "A. Jus jeruk",
        "B. Kopi",
        "C. Air putih"
      ],
      correct: 0
    },
{
  hint: "Dengarkan percakapan, lalu pilih jawaban yang benar",
  audio: "https://raw.githubusercontent.com/ivank1999/Ivank/main/Percakapan2.mp3",

    text: `
        <div style="text-align:center; font-size:25px; opacity:0.7; margin-bottom:10px;">
          pria dan wanita sedang berencana menjenguk orang sakit,
          dan sedang menentukan barang apa yang akan dibawakan
        </div>
    
         <div style="text-align:center; font-size:20px; color:red; opacity:0.7; margin-bottom:8px;">
          Pertanyaan:
        </div>
        <div style="text-align:center; font-size:25px; font-weight:600;">
          MEREKA MEMILIH APA?
        </div>
      `,
 
  choices: [
    "A. Buah (GAMBAR)",
    "B. Roti Bulat (GAMBAR)",
    "C. Minuman (GAMBAR)"
  ],
  correct: 1
},

 {
    hint: "Dengarkan percakapan berikut, lalu pilih jawaban yang benar",
    audio: "https://raw.githubusercontent.com/ivank1999/Ivank/main/Percakapan3.mp3",
  
    text: `
      <div style="text-align:center; font-size:25px; opacity:0.7; margin-bottom:10px;">
         Mengenai orang yang akan melakukan laundry pakaian
      </div>
  
       <div style="text-align:center; font-size:20px; color:red; opacity:0.7; margin-bottom:8px;">
        Pertanyaan:
      </div>
      <div style="text-align:center; font-size:25px; font-weight:600;">
        ITEM APA SAJA YANG DI LAUNDRY KAN?
      </div>
    `,
    choices: [
      "A. Sweater abu-abu dan kemeja",
      "B. Kemeja hitam dan kaos biru",
      "C. sweater merah dan kemeja biru"
    ],
    correct: 0
  },
  {
    hint: "Dengarkan percakapan berikut, lalu pilih jawaban yang benar",
    audio: "https://raw.githubusercontent.com/ivank1999/Ivank/main/Percakapan4.mp3",
  
    text: `
      <div style="text-align:center; font-size:25px; opacity:0.7; margin-bottom:10px;">
        Ada kelas memasak
      </div>
  
      <div style="text-align:center; font-size:20px; color:red; opacity:0.7; margin-bottom:8px;">
        Pertanyaan:
      </div>
  
      <div style="text-align:center; font-size:25px; font-weight:600;">
        WANITA TERSEBUT MEMILIH TANGGAL BERAPA?
      </div>
    `,
  
    choices: [
      "A. 6æœˆ9æ—¥",
      "B. 6æœˆ10æ—¥",
      "C. 6æœˆ11æ—¥"
    ],
    correct: 2
  },
  {
      hint: "Dengarkan percakapan berikut, lalu pilih jawaban yang benar",
      audio: "https://raw.githubusercontent.com/ivank1999/Ivank/main/Percakapan5.mp3",
    
      text: `
        <div style="text-align:center; font-size:25px; opacity:0.7; margin-bottom:10px;">
          Ada orang yang akan janjian bertemu
        </div>
    
        <div style="text-align:center; font-size:20px; color:red; opacity:0.7; margin-bottom:8px;">
          Pertanyaan:
        </div>
    
        <div style="text-align:center; font-size:25px; font-weight:600;">
          AKAN BERTEMU DIMANA ?
        </div>
      `,
    
      choices: [
        "A. di pintu masuk dedung bioskop (gambar)",
        "B. di tempat makan ramen (gambar)",
        "C. di depan stasiun yang ada jam besar dan bulat nya (gambar)"
      ],
      correct: 2
    },
   {
        hint: "Dengarkan percakapan berikut, lalu pilih jawaban yang benar",
        audio: "https://raw.githubusercontent.com/ivank1999/Ivank/main/Percakapan6(1).mp3",
      
        text: `
          <div style="text-align:center; font-size:25px; opacity:0.7; margin-bottom:10px;">
            Ada orang yang penjual yang menjual hankachi
            kalau membeli 1 harganya 100 yen, tetapi kalau membeli 2
            menjadi 150 yen
          </div>
      
          <div style="text-align:center; font-size:20px; color:red; opacity:0.7; margin-bottom:8px;">
            Pertanyaan:
          </div>
      
          <div style="text-align:center; font-size:25px; font-weight:600;">
            BERAPA HARGA YANG DIBAYAR ?
          </div>
        `,
      
        choices: [
          "A. 100 Yen",
          "B. 150 Yen",
          "C. 200 Yen"
        ],
        correct: 1
      },
      
    
      {
          type: "double",
          hint: "Dengarkan percakapan, lalu jawab pertanyaan A dan B",
          audio: "https://raw.githubusercontent.com/ivank1999/Ivank/main/Percakapan7.mp3",
          text: `<div style="text-align:center; font-size:25px; opacity:0.7; margin-bottom:10px;">
                  Ada percakapan antara dokter dna pasien
                 </div>`,
          questions: [
            {
              label: "A",
              text: "DIWAKTU APA OBAT TERSEBUT DI MINUM ?",
              choices: [
                "A. Di waktu pagi hari",
                "B. Di waktu malam hari",
                "C. Di awaktu pagi dan malam hari"
              ],
              correct: 1
            },
            {
              label: "B",
              text: "BERAPA OBAT YANG DIMINUM ?",
              choices: [
                "A. ãµãŸã¤ï¼ˆï¼’ã¤ï¼‰",
                "B. ã¿ã£ã¤ï¼ˆï¼“ã¤ï¼‰",
                "C. ã²ã¨ã¤ï¼ˆï¼‘ã¤ï¼‰"
              ],
              correct: 2
            }
          ]
      },
      {
          type: "double",
          hint: "Dengarkan percakapan, lalu jawab pertanyaan A dan B",
          audio: "https://raw.githubusercontent.com/ivank1999/Ivank/main/Percakapan8.mp3",
          text: `<div style="text-align:center; font-size:25px; opacity:0.7; margin-bottom:10px;">
                  Ada info dari siaran di dalam kereta
                 </div>`,
          questions: [
            {
              label: "A",
              text: "KERETANYA BERHENTI DIMANA ?",
              choices: [
                "A. ã•ãã‚‰ãˆã)Di sakura eki)",
                "B. ã¿ã©ã‚Šãˆã(Di midori eki)",
                "C. ã²ã‹ã‚Šãˆã(Di hikari eki)"
              ],
              correct: 1
            },
            {
              label: "B",
              text: "JAM BERAPA TIBA ?",
              choices: [
                "A. 11 : 50",
                "B. 11 : 30",
                "C. 01 : 50"
              ],
              correct: 0
            }
          ]
      },
     {
          type: "double",
          hint: "Dengarkan percakapan, lalu jawab pertanyaan A dan B",
          audio: "https://raw.githubusercontent.com/ivank1999/Ivank/main/Percakapan9.mp3",
          text: `<div style="text-align:center; font-size:25px; opacity:0.7; margin-bottom:10px;">
                  Percakapan mengenai waktu dan cara membuang sampah
                 </div>`,
          questions: [
            {
              label: "A",
              text: "KAPAN WAKTU UNTUK MEMBUANG SAMPAH KERTAS NYA ?",
              choices: [
                "A. åœŸæ›œæ—¥ï¼ˆhari sabtuï¼‰ jam 09.00",
                "B. åœŸæ›œæ—¥ï¼ˆhari sabtuï¼‰ jam 07.00",
                "C. æ—¥æ›œæ—¥ï¼ˆhari mingguï¼‰ jam 09.00"
              ],
              correct: 0
            },
            {
              label: "B",
              text: "BAGAIMANA CARA MEMBUANG SAMPAH BOTOL PLASTIKNYA?",
              choices: [
                "A. dimasukan ke dalam kardus (gambar)",
                "B. dimasukan ke dalam kantong kresek hitam (gambar)",
                "C. dimasukan ke dalam kantong kresek yang bening / terlihat (gambar)"
              ],
              correct: 2
            }
          ]
      }
      

  ];
const questionsSession4 = [
  {
    type: "double",
    hint: "Baca pesan berikut, lalu jawab pertanyaan A dan B",
    image: "https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9821.jpeg",
    imageWidth: 480,
    questions: [
      {
        label: "A",
        text: "ãã®äººã¯ä½•ã‚’è¦‹ã¾ã—ãŸã‹ï¼Ÿ<br><span style='color:red; font-size:16px'>(Orang tersebut melihat apa?)</span>",
        choices: [
          `<div style="text-align:center">
             <img src="https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9840.png" width="150"><br> <span style="color:red; font-size:16px">ã¯ãªï¼ˆèŠ±ï¼‰</span>
           </div>`,
          `<div style="text-align:center">
             <img src="https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9841.png" width="150"><br> <span style="color:red; font-size:16px">ãˆã‚“ã’ãï¼ˆæ¼”åŠ‡ï¼‰</span>
           </div>`,
          `<div style="text-align:center">
             <img src="https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9842.png" width="150"><br> <span style="color:red; font-size:16px">ãŠã¦ã‚‰ï¼ˆãŠå¯ºï¼‰</span>
           </div>`
        ],
        correct: 2
      },
      {
        label: "B",
        text: "ã‚Šã‚‡ã“ã†ã§ä½•ã‚’é£Ÿã¹ã¾ã—ãŸã‹ï¼Ÿ<br><span style='color:red; font-size:16px'>(Saat berwisata, apa yang dimakan?)</span>",
        choices: [
          `<div style="text-align:center">
             <img src="https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9845.png" width="150"><br> <span style="color:red; font-size:16px">ã‚¯ãƒƒã‚­ãƒ¼</span>
           </div>`,
          `<div style="text-align:center">
             <img src="https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9844.png" width="150"><br> <span style="color:red; font-size:16px">ã‚±ãƒ¼ã‚­</span>
           </div>`,
          `<div style="text-align:center">
             <img src="https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9843.png" width="150"><br> <span style="color:red; font-size:16px">ã‚³ãƒ¼ãƒ’ãƒ¼</span>
           </div>`
        ],
        correct: 1
      }
    ]
  },
  {
          type: "double",
          hint: "Bacalah teks berikut, lalu jawab pertanyaan A dan B",
          image: "https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9820.png",
          imageWidth: 480,
          questions: [
            {
              label: "A",
              text: "ãã®äººã¯ã„ã¤ãŠé¢¨å‘‚ã«å…¥ã‚Šã¾ã—ãŸã‹<br><span style='color:red; font-size:16px'>(Kapan orang tersebut mandi?)</span>",
              choices: [
                "A. æœ",
                "B. æ˜¼",
                "C. å¤œ"
              ],
              correct: 1
            },
            {
              label: "B",
              text: "ãŠé¢¨å‘‚ã«å…¥ã£ã¦ã„ã‚‹ã¨ãä½•ã‚’ã—ã¾ã—ãŸã‹<br><span style='color:red; font-size:16px'>(Saat sedang mandi, apa yang dilakukan?)</span>",
              choices: [
                "A. éŸ³æ¥½ã‚’èãã¾ã—ãŸ",
                "B. æœ¬ã‚’èª­ã¿ã¾ã—ãŸ",
                "C. ãŸã„ãã†ã—ã¾ã—ãŸ"
              ],
              correct: 1
            }
          ]
      },
      {
          type: "double",
          hint: "Bacalah teks berikut, lalu jawab pertanyaan A dan B",
          image: "https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9822.png",
          imageWidth: 480,
          questions: [
            {
              label: "A",
              text: "ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®¤ã«å…¥ã‚‹ã¨ãã¯å¿…è¦ãªã®ãŒä½•ã§ã™ã‹ï¼Ÿ<br><span style='color:red; font-size:16px'>(Saat masuk ruang latihan, apa yang diperlukan?)</span>",
              choices: [
                "A. åˆ©ç”¨ã‚«ãƒ¼ãƒ‰",
                "B. ãã¤",
                "C. é£²ã¿ç‰©"
              ],
              correct: 0
            },
            {
              label: "B",
              text: "ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å®¤ã®ä¸­ã§ã—ã¦ã‚‚ã„ã„ã“ã¨ã¯ä½•ã§ã™ã‹<br><span style='color:red; font-size:16px'>(Apa yang boleh dilakukan di dalam ruang latihan?)</span>",
              choices: [
                "A. å¤–ã‹ã‚‰ã®ãã¤ã‚’ä½¿ã„ã¾ã™",
                "B. é£²ã¿ç‰©ã‚’é£²ã¿ã¾ã™",
                "C. ãƒã‚·ãƒ³ã«ã™ã‚ã£ãŸã¾ã¾ä¼‘ã¿ã¾ã™"
              ],
              correct: 1
            }
          ]
      },
       {
          type: "double",
          hint: "Bacalah teks berikut, lalu jawab pertanyaan A dan B",
          image: "https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9819.png",
          imageWidth: 480,
          questions: [
            {
              label: "A",
              text: "ä½•æ™‚ã«å‡ºç™ºã—ã¾ã™ã‹<br><span style='color:red; font-size:16px'>(Jam berapa berangkat?)</span>",
              choices: [
                "A. ï¼‘ï¼æ™‚20åˆ†",
                "B. ï¼‘ï¼”æ™‚8åˆ†",
                "C. ï¼–æœˆ9æ—¥"
              ],
              correct: 0
            },
            {
              label: "B",
              text: "ã©ã“ã‹ã‚‰ä¹—ã‚Šã¾ã™ã‹<br><span style='color:red; font-size:16px'>(Naik dari mana?)</span>",
              choices: [
                "A. ç§‹ç”°",
                "B. æ±äº¬",
                "C. ã“ã¾ã¡"
              ],
              correct: 1
            }
          ]
      },
      {
          type: "double",
          hint: "Bacalah teks berikut, lalu jawab pertanyaan A dan B",
          image: "https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9817.png",
          imageWidth: 480,
          questions: [
            {
              label: "A",
              text: "ä»Šæ—¥ã¯ä½•æ™‚ã‹ã‚‰é›¨ãŒé™ã‚Šã¾ã™ã‹<br><span style='color:red; font-size:16px'>(Hari ini hujan turun mulai jam berapa?)</span>",
              choices: [
                "A. ï¼™æ™‚",
                "B. ï¼‘ï¼æ™‚",
                "C. ï¼‘ï¼‘æ™‚"
              ],
              correct: 1
            },
            {
              label: "B",
              text: "æ—¥æ›œæ—¥ã®å¤©æ°—ã¯ã©ã†ã§ã™ã‹<br><span style='color:red; font-size:16px'>(Bagaimana cuaca hari Minggu?)</span>",
              choices: [
                "A. æ™´ã‚Œã‚‹",
                "B. ãã‚‚ã‚‹",
                "C. ã‚ã‚"
              ],
              correct: 1
            }
          ]
      },
      {
          type: "double",
          hint: "Bacalah teks berikut, lalu jawab pertanyaan A dan B",
          image: "https://raw.githubusercontent.com/ivank1999/Ivank/main/IMG_9825.jpeg",
          imageWidth: 480,
          questions: [
            {
              label: "A",
              text: "ã©ã†ã¶ã¤ãŒã¿ã‚‰ã‚Œã‚‹ã®ã¯ã©ã“ã§ã™ã‹<br><span style='color:red; font-size:16px'>(Di mana bisa melihat binatang?)</span>",
              choices: [
                "A. ã‹ã‚“ãªã¿ã¡ã‚‡ã†",
                "B. ã¬ã¾ãšã¡ã‚‡ã†",
                "C. ã¿ã—ã¾ã¡ã‚‡ã†"
              ],
              correct: 2
            },
            {
              label: "B",
              text: "ã“ã‚„ã¾ã¡ã‚‡ã†ã§ã§ãã‚‹ã“ã¨ã¯ä½•ã§ã™ã‹<br><span style='color:red; font-size:16px'>(Apa yang bisa dilakukan di Kota Koyama?)</span>",
              choices: [
                "A. é£Ÿã¹ãŸã‚Šã€è²·ã„ç‰©ã—ãŸã‚Š",
                "B. ã‚„ãã¨ã‚ŠãŒé£Ÿã¹ã‚‰ã‚Œã¾ã™",
                "C. ã©ã†ã¶ã¤ãŒã¿ã‚‰ã‚Œã¾ã™"
              ],
              correct: 0
            }
          ]
      }
  

];
let current = 0;
let answers = Array(questions.length).fill(null);
let examFinished = false;
const questionsSession1 = questions;

const sessions = [
  questionsSession1,
  questionsSession2,
  questionsSession3,
  questionsSession4
];

let sessionIndex = 0; // mulai dari sesi 1
const sidebar = document.getElementById("sidebar");
const image = document.getElementById("questionImage");
const answersDiv = document.getElementById("answers");
const finishBtn = document.getElementById("finishBtn");
finishBtn.addEventListener("click", finishExam);
const questionText = document.getElementById("questionText");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");

prevBtn.onclick = () => {
  if (sessionIndex > 0) {
    sessionIndex--;   // ğŸ”¥ balik ke sesi sebelumnya
  }
  startSession();     // reset sesi itu
};
nextBtn.onclick = () => {
  if (sessionIndex < sessions.length - 1) {
    sessionIndex++;
    startSession();
  } else {
    alert("Semua sesi sudah selesai ğŸ‰");
  }
};

function updateTitle() {
  document.getElementById("title").textContent =
    `SOBA SESI ${sessionIndex + 1}`;
}
function startSession() {
  questions = sessions[sessionIndex];

  // ğŸ”¥ KHUSUS SESI 4: SEMBUNYIKAN SIDEBAR
/*  if (sessionIndex === 3) {
    sidebar.style.display = "none";
  } else {
    sidebar.style.display = "block";
  }        */
   sidebar.style.display = "block";
   
  if (!questions || questions.length === 0) {
    alert(`Sesi  belum tersedia`);
    return;
  }
  current = 0;
  answers = Array(questions.length).fill(null);
  examFinished = false;

  document.getElementById("result").style.display = "none";

  finishBtn.style.display = "none";
  finishBtn.disabled = false;
  prevBtn.style.display = "none";
  nextBtn.style.display = "none";

  sidebar.innerHTML = "";
  questions.forEach((q, i) => {
    const btn = document.createElement("button");
    btn.textContent = i + 1;
    btn.onclick = () => loadQuestion(i);
    sidebar.appendChild(btn);
  });

  updateTitle();
  loadQuestion(0);
}
function toggleSessionMenu() {
  const menu = document.getElementById("sessionMenu");
  menu.style.display = menu.style.display === "block" ? "none" : "block";
}

function goSession(index) {
  if (!sessions[index] || sessions[index].length === 0) {
    alert("Sesi ini belum tersedia");
    return;
  }

  sessionIndex = index;
  document.getElementById("sessionMenu").style.display = "none";
  startSession();
}
/* LOAD SOAL */
function loadQuestion(index) {
  current = index;
  const q = questions[index];

  
  // ğŸ”¥ KHUSUS SESI 4 (HTML FULL)
  if (q.type === "html") {
    document.getElementById("questionHint").style.display = "none";
    questionText.style.display = "none";
    image.style.display = "none";
  
    answersDiv.innerHTML = q.html;
  
    updateSidebar();
    return;
  }
if (q.type === "double") {
    if (!Array.isArray(answers[current])) {
      answers[current] = Array(q.questions.length).fill(undefined);
    }
    renderDoubleQuestion(q);
    updateSidebar();
    return;
  }
const hintDiv = document.getElementById("questionHint");

if (q.hint) {
  hintDiv.innerHTML = q.hint;
  hintDiv.style.display = "block";
} else {
  hintDiv.style.display = "none";
}
  if (q.text) {
    questionText.innerHTML = q.text;
    questionText.style.display = "block";
  } else {
    questionText.style.display = "none";
  }

  if (q.image) {
    image.src = q.image;
    image.style.display = "block";
  
    // ğŸ”¥ TAMBAHKAN INI
    image.style.maxWidth = "none";
    image.style.width = q.imageWidth
      ? q.imageWidth + "px"
      : "470px";
    image.style.height = "auto";
  } else {
    image.style.display = "none";
  } 
  answersDiv.innerHTML = "";
    
  // ===== CUSTOM AUDIO BUTTON =====
    const oldFake = document.getElementById("fakeAudio");
    if (oldFake) oldFake.remove();
    
    const oldReal = document.getElementById("realAudio");
    if (oldReal) oldReal.remove();
    
    if (q.audio) {
      const fakeBtn = document.createElement("div");
      fakeBtn.id = "fakeAudio";
      fakeBtn.className = "fake-audio";
      fakeBtn.textContent = "â–¶ï¸ Putar Audio";
    
      const audio = document.createElement("audio");
      audio.id = "realAudio";
      audio.src = q.audio;
      audio.preload = "metadata";
      audio.style.display = "none";
    
      questionText.insertAdjacentElement("afterend", fakeBtn);
      fakeBtn.insertAdjacentElement("afterend", audio);
    
      audio.onloadedmetadata = () => {
        fakeBtn.textContent = `â–¶ï¸ Putar Audio (${formatTime(audio.duration)})`;
      };
    
      let timer;
    
      fakeBtn.onclick = () => {
        if (!audio.paused) {
          audio.pause();
          fakeBtn.classList.remove("playing");
          clearInterval(timer);
          fakeBtn.textContent = `â–¶ï¸ Putar Audio (${formatTime(audio.duration - audio.currentTime)})`;
        } else {
          audio.play();
          fakeBtn.classList.add("playing");
      
          clearInterval(timer);
          timer = setInterval(() => {
            fakeBtn.textContent =
              `â¸ï¸ Memutar... (${formatTime(audio.duration - audio.currentTime)})`;
          }, 300);
        }
      };
    
      audio.onended = () => {
        clearInterval(timer);
        fakeBtn.classList.remove("playing");
        fakeBtn.textContent = `â–¶ï¸ Putar Audio (${formatTime(audio.duration)})`;
      };
    }

  q.choices.forEach((choice, i) => {
    const label = document.createElement("label");
  
    const userAnswer = answers[current];
    const correctAnswer = q.correct;
  
    label.innerHTML = `
      <input type="radio" name="jawaban_${current}">${choice} ${examFinished && i === correctAnswer ? " âœ…  (jawaban benar) " : ""} ${examFinished && i === userAnswer && i !== correctAnswer ? "âŒ (jawaban kamu)" : ""}
    `;
  
    const input = label.querySelector("input");
  
    if (userAnswer === i) input.checked = true;
  
    if (examFinished) {
      input.disabled = true;
  
      if (i === correctAnswer) label.classList.add("correct");
      if (i === userAnswer && i !== correctAnswer) label.classList.add("wrong");
    } else {
      input.onclick = () => {
        answers[current] = i;
        updateSidebar();
        checkFinish();
      };
    }
  
    answersDiv.appendChild(label);
  });
  updateSidebar();
}
function renderDoubleQuestion(q) {
  answersDiv.innerHTML = "";
  // ===== CUSTOM AUDIO BUTTON UNTUK DOUBLE QUESTION =====
  const oldFake = document.getElementById("fakeAudio");
  if (oldFake) oldFake.remove();
  
  const oldReal = document.getElementById("realAudio");
  if (oldReal) oldReal.remove();
  
  if (q.audio) {
    const fakeBtn = document.createElement("div");
    fakeBtn.id = "fakeAudio";
    fakeBtn.className = "fake-audio";
    fakeBtn.textContent = "â–¶ï¸ Putar Audio";
  
    const audio = document.createElement("audio");
    audio.id = "realAudio";
    audio.src = q.audio;
    audio.preload = "metadata";
    audio.style.display = "none";
  
    answersDiv.insertAdjacentElement("afterbegin", fakeBtn);
    fakeBtn.insertAdjacentElement("afterend", audio);
  
    audio.onloadedmetadata = () => {
      fakeBtn.textContent = `â–¶ï¸ Putar Audio (${formatTime(audio.duration)})`;
    };
  
    let timer;
    fakeBtn.onclick = () => {
      if (!audio.paused) {
        audio.pause();
        fakeBtn.classList.remove("playing");
        clearInterval(timer);
        fakeBtn.textContent = `â–¶ï¸ Putar Audio (${formatTime(audio.duration - audio.currentTime)})`;
      } else {
        audio.play();
        fakeBtn.classList.add("playing");
    
        clearInterval(timer);
        timer = setInterval(() => {
          fakeBtn.textContent =
            `â¸ï¸ Memutar... (${formatTime(audio.duration - audio.currentTime)})`;
        }, 300);
      }
    };
  
    audio.onended = () => {
      clearInterval(timer);
      fakeBtn.classList.remove("playing");
      fakeBtn.textContent = `â–¶ï¸ Putar Audio (${formatTime(audio.duration)})`;
    };
  }
  // tampilkan hint di div khusus
  const hintDiv = document.getElementById("questionHint");
  if (q.hint) {
    hintDiv.innerHTML = q.hint;
    hintDiv.style.display = "block";
  } else {
    hintDiv.style.display = "none";
  }
// tampilkan text utama
 if (q.text) {
   const mainText = document.createElement("div");
   mainText.className = "double-question-text"; // pakai class CSS
   mainText.innerHTML = q.text;
   answersDiv.appendChild(mainText);
 }
  // sembunyikan questionText karena double tidak punya text utama
  questionText.style.display = "none";
  if (q.image) {
      image.src = q.image;
      image.style.display = "block";
    
      // ğŸ”¥ TAMBAHKAN INI
      image.style.maxWidth = "none";
      image.style.width = q.imageWidth
        ? q.imageWidth + "px"
        : "470px";
      image.style.height = "auto";
    }


  q.questions.forEach((subQ, subIndex) => {
    const box = document.createElement("div");
    box.style.marginBottom = "30px";

    box.innerHTML = `
      <div class="double-label"> Pertanyaan (${subQ.label})
        </div>
    
      <div class="double-question-text">${subQ.text}
        </div>
    `;

    subQ.choices.forEach((choice, i) => {
      const label = document.createElement("label");

      const userAnswer =
        answers[current] ? answers[current][subIndex] : null;
      
      label.innerHTML = `
        <input type="radio" 
          name="q_${current}_${subIndex}">${choice}
        
        ${
          examFinished && i === subQ.correct
            ? " âœ… (jawaban benar)"
            : ""
        }
        ${
          examFinished &&
          i === userAnswer &&
          i !== subQ.correct
            ? " âŒ (jawaban kamu)"
            : ""
        }
      `;

      const input = label.querySelector("input");
      // â¬…ï¸ FIX: balikin tanda biru kalau sudah pernah dijawab
      if (
        answers[current] &&
        answers[current][subIndex] === i
      ) {
        input.checked = true;
      }
      if (examFinished) {
        input.disabled = true;
      
        if (i === subQ.correct) label.classList.add("correct");
        if (
          answers[current] &&
          answers[current][subIndex] === i &&
          i !== subQ.correct
        ) {
          label.classList.add("wrong");
        }
      } else {
        input.onclick = () => {
          if (!answers[current]) answers[current] = [];
          answers[current][subIndex] = i;
         
          updateSidebar();
          checkFinish();
        };
      }

      box.appendChild(label);
    });

    answersDiv.appendChild(box);
  });
}

/* UPDATE SIDEBAR */
function updateSidebar() {
  [...sidebar.children].forEach((btn, i) => {
    btn.classList.remove("active", "answered", "wrong");

    // soal aktif
    if (i === current) {
      btn.classList.add("active");
    }

    // ===== MODE REVIEW (SETELAH SELESAI) =====
    if (examFinished) {
      if (questions[i].type === "double") {
        const userAns = answers[i];
        const total = questions[i].questions.length;

        if (
          !Array.isArray(userAns) ||
          userAns.length < total ||
          userAns.some(
            (a, idx) => a !== questions[i].questions[idx].correct
          )
        ) {
          btn.classList.add("wrong");
        } else {
          btn.classList.add("answered");
        }
      } else {
        if (answers[i] === questions[i].correct) {
          btn.classList.add("answered");
        } else {
          btn.classList.add("wrong");
        }
      }

      return; // â›” STOP di sini, jangan lanjut ke mode ujian
    }

// ===== MODE UJIAN =====
    if (questions[i].type === "double") {
      if (
        Array.isArray(answers[i]) &&
        answers[i].some(a => a !== undefined)
      ) {
        btn.classList.add("answered");
      }
    } else {
      if (answers[i] !== null) {
        btn.classList.add("answered");
      }
    }
  });
}/* CEK SELESAI */
function checkFinish() {
  const selesai = questions.every((q, i) => {
    if (q.type === "double") {
      return (
        Array.isArray(answers[i]) &&
        answers[i].length === q.questions.length &&
        answers[i].every(a => a !== undefined)
      );
    } else {
      return answers[i] !== null;
    }
  });

  if (selesai) {
    finishBtn.style.display = "inline-block";
  }
}
function resetExam() {
  examFinished = false;
  current = 0;
  answers = Array(questions.length).fill(null);

  document.getElementById("result").style.display = "none";

  finishBtn.style.display = "none";
  finishBtn.disabled = false;

  prevBtn.style.display = "none";
  nextBtn.style.display = "none";

  sidebar.innerHTML = "";
  answersDiv.innerHTML = ""; // ğŸ”¥ INI YANG KURANG

  questions.forEach((q, i) => {
    const btn = document.createElement("button");
    btn.textContent = i + 1;
    btn.onclick = () => loadQuestion(i);
    sidebar.appendChild(btn);
  });

  updateTitle();
  loadQuestion(0);
}
function toggle(btn){
  const box = btn.nextElementSibling;
  box.style.display =
    box.style.display === "block" ? "none" : "block";
}

function showJP(id){
  document.getElementById(id).style.display = "block";
}

/* SELESAI */
function finishExam() {
  let score = 0;

  questions.forEach((q, i) => {
    if (q.type === "double") {
      q.questions.forEach((sq, j) => {
        if (answers[i] && answers[i][j] === sq.correct) {
          score++;
        }
      });
    } else {
      if (answers[i] === q.correct) score++;
    }
  });

  examFinished = true; // ğŸ”¥ MASUK MODE REVIEW
  updateSidebar();
  loadQuestion(current); // refresh tampilan soal

  const resultDiv = document.getElementById("result");
  resultDiv.style.display = "block";
  resultDiv.innerHTML = `
    UJIAN SELESAI<br><br>
    NILAI ANDA: <span style="color:red">${score}</span> / 
  ${questions.length}`;

  finishBtn.disabled = true;
  /* ğŸ”¥ tampilkan tombol navigasi */
    prevBtn.style.display = "inline-block";
    nextBtn.style.display = "inline-block";
  
}
function formatTime(sec) {
  sec = Math.ceil(sec);
  const m = Math.floor(sec / 60);
  const s = sec % 60;
  return `${m}:${s.toString().padStart(2,"0")}`;
}
/* INIT */
startSession();
</script>

</body>
</html>
